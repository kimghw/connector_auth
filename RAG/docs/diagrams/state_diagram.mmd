
stateDiagram-v2
    [*] --> PENDING: Document Uploaded

    PENDING --> PROCESSING: Start Processing

    PROCESSING --> EXTRACTION: Extract Text
    EXTRACTION --> CHUNKING: Text Extracted
    CHUNKING --> EMBEDDING: Chunks Created
    EMBEDDING --> INDEXING: Embeddings Generated
    INDEXING --> COMPLETED: Index Updated

    EXTRACTION --> ERROR: Extraction Failed
    CHUNKING --> ERROR: Chunking Failed
    EMBEDDING --> ERROR: Embedding Failed
    INDEXING --> ERROR: Indexing Failed

    ERROR --> PROCESSING: Retry
    ERROR --> DELETED: Delete Document
    COMPLETED --> DELETED: Delete Document

    DELETED --> [*]
    COMPLETED --> [*]
    