# MCP Tool Editor

MCP ì„œë²„ì˜ íˆ´ ì •ì˜ë¥¼ ì‹œê°ì ìœ¼ë¡œ í¸ì§‘í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì›¹ ê¸°ë°˜ ì—ë””í„°ì…ë‹ˆë‹¤.

## ğŸ“ íŒŒì¼ êµ¬ì¡° ë° ìš©ë„

### ğŸŒ ì›¹ ì—ë””í„° (Core)

#### `tool_editor_web.py`
- **ìš©ë„**: Flask ê¸°ë°˜ ì›¹ ì—ë””í„° ì„œë²„ (ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜)
- **ê¸°ëŠ¥**:
  - ì›¹ UIë¥¼ í†µí•´ MCP íˆ´ ì •ì˜ í¸ì§‘
  - `tool_definition_outlook_templates.py`ì—ì„œ ë°ì´í„° ë¡œë“œ
  - ì €ì¥ ì‹œ 2ê°œ íŒŒì¼ ë™ì‹œ ìƒì„±:
    - `tool_definition_outlook_templates.py` (ë©”íƒ€ë°ì´í„° í¬í•¨)
    - `../mcp_outlook/mcp_server/tool_definitions.py` (ê¹¨ë—í•œ ë²„ì „)
  - Pydantic ëª¨ë¸ â†’ JSON Schema ìë™ ë³€í™˜
- **ì‹¤í–‰**: `./run_tool_editor.sh` ë˜ëŠ” `python tool_editor_web.py`

#### `run_tool_editor.sh`
- **ìš©ë„**: ì›¹ ì—ë””í„° ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
- **ê¸°ëŠ¥**:
  - Flask ì„œë²„ ì‹œì‘ (`tool_editor_web.py`)
  - ê¸°ë³¸ í¬íŠ¸: 8091
  - ë¸Œë¼ìš°ì € ìë™ ì˜¤í”ˆ

#### `templates/tool_editor.html`
- **ìš©ë„**: ì›¹ ì—ë””í„° UI (HTML í…œí”Œë¦¿)
- **ê¸°ëŠ¥**: íˆ´ ëª©ë¡, íŒŒë¼ë¯¸í„° í¸ì§‘, ìŠ¤í‚¤ë§ˆ ë¯¸ë¦¬ë³´ê¸°

---

### ğŸ“‹ íˆ´ ì •ì˜ íŒŒì¼ (Data)

#### `tool_definition_outlook_templates.py` â­
- **ìš©ë„**: ì›¹ ì—ë””í„°ì˜ ë°ì´í„° ì†ŒìŠ¤ (ë©”íƒ€ë°ì´í„° í¬í•¨ ë²„ì „)
- **ë‚´ìš©**:
  ```python
  {
    "name": "mail_search",
    "inputSchema": {...},
    "mcp_service": {  # â† ì¶”ê°€ ë©”íƒ€ë°ì´í„°
      "name": "query_search",  # ì‹¤ì œ í•¨ìˆ˜ëª…
      "signature": "user_email: str, search: str, ..."  # í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜
    }
  }
  ```
- **íŠ¹ì§•**:
  - ì›¹ ì—ë””í„°ì—ì„œ **ë¡œë“œ**í•  ë•Œ ì‚¬ìš© (ìš°ì„ ìˆœìœ„ 1)
  - ì›¹ ì—ë””í„°ì—ì„œ **ì €ì¥**í•  ë•Œ ìë™ ì—…ë°ì´íŠ¸
  - `jinja/generate_outlook_server.py`ê°€ `server.py` ìƒì„± ì‹œ ì°¸ì¡°
  - `mcp_service` í•„ë“œë¡œ í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ì •ë³´ ë³´ì¡´

#### `editor_config.json`
- **ìš©ë„**: ì›¹ ì—ë””í„° ì„¤ì • íŒŒì¼ (ë‹¤ì¤‘ í”„ë¡œí•„ ì§€ì›)
- **ë‚´ìš©**:
  ```json
  {
    "_default": {
      "template_definitions_path": "tool_definition_outlook_templates.py",
      "tool_definitions_path": "../mcp_outlook/mcp_server/tool_definitions.py",
      "graph_types_files": ["../mcp_outlook/outlook_types.py"]
    },
    "outlook": {...},
    "attachment": {...}
  }
  ```
- **ìƒì„±**: `jinja/generate_editor_config.py`ë¡œ ìë™ ìƒì„±

---

### ğŸ”§ ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸

#### `pydantic_to_schema.py`
- **ìš©ë„**: Pydantic ëª¨ë¸ â†’ JSON Schema ë³€í™˜ê¸°
- **ê¸°ëŠ¥**:
  - `graph_types.py` (ë˜ëŠ” `outlook_types.py`)ì˜ Pydantic ëª¨ë¸ ë¡œë“œ
  - `FilterParams`, `ExcludeParams` ë“±ì„ JSON Schemaë¡œ ë³€í™˜
  - ì›¹ ì—ë””í„°ì—ì„œ "baseModel" ë“œë¡­ë‹¤ìš´ ìë™ ì±„ìš°ê¸°

#### `extract_types.py`
- **ìš©ë„**: `graph_types.py`ì—ì„œ Pydantic ëª¨ë¸ ì¶”ì¶œ
- **ê¸°ëŠ¥**:
  - AST íŒŒì‹±ìœ¼ë¡œ ëª¨ë¸ í´ë˜ìŠ¤ ì°¾ê¸°
  - í•„ë“œ íƒ€ì…, description, default ê°’ ì¶”ì¶œ
  - `types_properties.json` ìƒì„±

#### `extract_real_mcp_services.py`
- **ìš©ë„**: ì½”ë“œë² ì´ìŠ¤ì—ì„œ `@mcp_service` ë°ì½”ë ˆì´í„° ìŠ¤ìº”
- **ê¸°ëŠ¥**:
  - í”„ë¡œì íŠ¸ ì „ì²´ë¥¼ ì¬ê·€ íƒìƒ‰
  - ë°ì½”ë ˆì´í„°ê°€ ë¶™ì€ í•¨ìˆ˜ ì°¾ê¸°
  - í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜, íŒŒë¼ë¯¸í„° ì¶”ì¶œ
  - `outlook_mcp_services.json`, `outlook_mcp_services_detailed.json` ìƒì„±
- **ì‹¤í–‰**: `python extract_real_mcp_services.py outlook`

#### `mcp_service_scanner.py`
- **ìš©ë„**: `@mcp_service` AST ê¸°ë°˜ ìŠ¤ìºë„ˆ (ì›¹ ì—ë””í„°ì™€ CLIì—ì„œ ê³µìš© ì‚¬ìš©)
- **ê¸°ëŠ¥**:
  - í”„ë¡œì íŠ¸ ì¬ê·€ íƒìƒ‰ (venv, backups ë“± ê¸°ë³¸ ì œì™¸ ê²½ë¡œ ì ìš©)
  - í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜, íŒŒë¼ë¯¸í„°, ë°ì½”ë ˆì´í„° ë©”íƒ€ë°ì´í„° ì¶”ì¶œ
  - `get_services_map()`ìœ¼ë¡œ ì„œë²„ë³„ ìºì‹œ ì œê³µ

#### `mcp_service_decorator.py`
- **ìš©ë„**: `@mcp_service` ë°ì½”ë ˆì´í„° ì •ì˜
- **ê¸°ëŠ¥**:
  - í•¨ìˆ˜ë¥¼ MCP íˆ´ë¡œ ë§ˆí‚¹
  - ë©”íƒ€ë°ì´í„° ì €ì¥ (tool_name, description, category ë“±)
  - ë ˆì§€ìŠ¤íŠ¸ë¦¬ íŒ¨í„´ìœ¼ë¡œ íˆ´ ê´€ë¦¬

#### `tool_editor_web_server_mappings.py`
- **ìš©ë„**: ì„œë²„ ì´ë¦„ ë§¤í•‘ ìœ í‹¸ë¦¬í‹°
- **ê¸°ëŠ¥**:
  - í”„ë¡œí•„ëª… â†’ ì„œë²„ëª… ë³€í™˜
  - ê²½ë¡œ â†’ ì„œë²„ëª… ì¶”ë¡ 
  - `get_server_name_from_profile()`, `get_server_name_from_path()`

#### `generate_schema_from_service.py`
- **ìš©ë„**: MCP ì„œë¹„ìŠ¤ì—ì„œ ìŠ¤í‚¤ë§ˆ ìë™ ìƒì„±
- **ê¸°ëŠ¥**: (í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ì§€ í™•ì¸ í•„ìš”)

---

### ğŸ“Š ìƒì„±ëœ JSON íŒŒì¼ (ìºì‹œ/ë©”íƒ€ë°ì´í„°)

#### `outlook_mcp_services.json`
- **ìƒì„±**: `extract_real_mcp_services.py outlook`
- **ë‚´ìš©**: Outlook ì„œë²„ì˜ `@mcp_service` í•¨ìˆ˜ ëª©ë¡ (ê°„ë‹¨ ë²„ì „)

#### `outlook_mcp_services_detailed.json`
- **ìƒì„±**: `extract_real_mcp_services.py outlook`
- **ë‚´ìš©**: Outlook ì„œë²„ì˜ `@mcp_service` í•¨ìˆ˜ ìƒì„¸ ì •ë³´

#### `attachment_mcp_services.json`
- **ìƒì„±**: `extract_real_mcp_services.py attachment`
- **ë‚´ìš©**: Attachment ì„œë²„ì˜ `@mcp_service` í•¨ìˆ˜ ëª©ë¡

#### `attachment_mcp_services_detailed.json`
- **ìƒì„±**: `extract_real_mcp_services.py attachment`
- **ë‚´ìš©**: Attachment ì„œë²„ì˜ `@mcp_service` í•¨ìˆ˜ ìƒì„¸ ì •ë³´

#### `types_properties.json`
- **ìƒì„±**: `extract_types.py`
- **ë‚´ìš©**: Pydantic ëª¨ë¸ì˜ í•„ë“œ ì •ë³´ (ìºì‹œ)

---

## ğŸ”„ ì „ì²´ ì›Œí¬í”Œë¡œìš°

### 1ï¸âƒ£ ì›¹ ì—ë””í„°ë¡œ íˆ´ ì •ì˜ í¸ì§‘

```bash
# ì›¹ ì—ë””í„° ì‹¤í–‰
./run_tool_editor.sh

# ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8091 ì—´ë¦¼
# â†’ tool_definition_outlook_templates.py ë¡œë“œ
# â†’ íˆ´ í¸ì§‘ (íŒŒë¼ë¯¸í„° ì¶”ê°€/ìˆ˜ì •, ìŠ¤í‚¤ë§ˆ ë³€ê²½ ë“±)
# â†’ Save ë²„íŠ¼ í´ë¦­
# â†’ 2ê°œ íŒŒì¼ ë™ì‹œ ì €ì¥:
#    [1] tool_definition_outlook_templates.py (ë©”íƒ€ë°ì´í„° í¬í•¨)
#    [2] ../mcp_outlook/mcp_server/tool_definitions.py (ê¹¨ë—í•œ ë²„ì „)
```

### 2ï¸âƒ£ server.py ìë™ ìƒì„±

```bash
cd ../jinja
python generate_outlook_server.py --replace

# â†’ tool_definition_outlook_templates.py ë¡œë“œ
# â†’ í…œí”Œë¦¿ìœ¼ë¡œ server.py ìƒì„±
# â†’ ../mcp_outlook/mcp_server/server.py ì—…ë°ì´íŠ¸
```

### 3ï¸âƒ£ ìƒˆë¡œìš´ MCP ì„œë²„ ì¶”ê°€ ì‹œ

```bash
# 1. ì½”ë“œë² ì´ìŠ¤ ìŠ¤ìº” (@mcp_service ë°ì½”ë ˆì´í„°)
cd mcp_editor
python extract_real_mcp_services.py new_server

# 2. editor_config.json ìë™ ìƒì„±
cd ../jinja
python generate_editor_config.py

# 3. ì›¹ ì—ë””í„°ë¡œ íˆ´ ì •ì˜ ì‘ì„±
cd ../mcp_editor
./run_tool_editor.sh
```

---

## ğŸ“Œ ì£¼ìš” ë°ì´í„° íë¦„

### ë°ì´í„° ë¡œë“œ (ì›¹ ì—ë””í„° ì˜¤í”ˆ ì‹œ)

```
tool_definition_outlook_templates.py  â† [ìš°ì„ ìˆœìœ„ 1]
  â†“
ì›¹ ì—ë””í„° UI
  â†“
ë¸Œë¼ìš°ì €ì—ì„œ í¸ì§‘
```

### ë°ì´í„° ì €ì¥ (Save ë²„íŠ¼ í´ë¦­ ì‹œ)

```
ì›¹ ì—ë””í„° UI (ë¸Œë¼ìš°ì €)
  â†“ POST /api/tools
ì›¹ ì—ë””í„° ë°±ì—”ë“œ (tool_editor_web.py:284 save_tool_definitions)
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1ï¸âƒ£ ë°ì´í„° íŒŒì‹± ë° ì •ì œ (tool_editor_web.pyì—ì„œ ì²˜ë¦¬)        â”‚
â”‚   â”œâ”€ tools_data (ì›¹ì—ì„œ ë°›ì€ JSON)                          â”‚
â”‚   â”œâ”€ mcp_service ë©”íƒ€ë°ì´í„° ìœ ì§€                            â”‚
â”‚   â””â”€ inputSchema í•„ë“œ ìˆœì„œ ì •ë¦¬                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2ï¸âƒ£ ì†ŒìŠ¤ì½”ë“œ ìŠ¤ìº” (AST íŒŒì‹±)                                 â”‚
â”‚   mcp_service_scanner.get_services_map() í˜¸ì¶œ               â”‚
â”‚   â†“                                                         â”‚
â”‚   mcp_{server}/ ë””ë ‰í† ë¦¬ ì¬ê·€ ìŠ¤ìº” (venv/backups ì œì™¸)      â”‚
â”‚   â†“                                                         â”‚
â”‚   @mcp_service í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°Â·ì‹œê·¸ë‹ˆì²˜ ì¶”ì¶œ                â”‚
â”‚   ì˜ˆ: "user_email: str, search: str, max_results: int = 10" â”‚
â”‚   â†“                                                         â”‚
â”‚   signatures_by_name = {...}                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3ï¸âƒ£ ë‘ ê°œ íŒŒì¼ ë™ì‹œ ìƒì„±                                     â”‚
â”‚                                                             â”‚
â”‚ [A] tool_definition_outlook_templates.py (ë©”íƒ€ë°ì´í„° í¬í•¨)  â”‚
â”‚     â†“                                                       â”‚
â”‚     for tool in tools_data:                                 â”‚
â”‚       if tool['mcp_service']['name'] in signatures_by_name: â”‚
â”‚         tool['mcp_service']['signature'] = signatures[...]  â”‚
â”‚     â†“                                                       â”‚
â”‚     ì €ì¥ ë‚´ìš©:                                              â”‚
â”‚     {                                                       â”‚
â”‚       "name": "query_emails",                               â”‚
â”‚       "description": "...",                                 â”‚
â”‚       "inputSchema": {...},                                 â”‚
â”‚       "mcp_service": {  â† ë©”íƒ€ë°ì´í„° ìœ ì§€                   â”‚
â”‚         "name": "query_search",  â† ì‹¤ì œ í•¨ìˆ˜ëª…             â”‚
â”‚         "signature": "user_email: str, ..."  â† AST ì¶”ì¶œ    â”‚
â”‚       }                                                     â”‚
â”‚     }                                                       â”‚
â”‚     â†“                                                       â”‚
â”‚     ìš©ë„: ì›¹ ì—ë””í„° ë¡œë“œ, server.py ìƒì„± ì‹œ ì‚¬ìš©            â”‚
â”‚                                                             â”‚
â”‚ [B] ../mcp_outlook/mcp_server/tool_definitions.py (ê¹¨ë—í•œ ë²„ì „) â”‚
â”‚     â†“                                                       â”‚
â”‚     cleaned_tools = []                                      â”‚
â”‚     for tool in tools_data:                                 â”‚
â”‚       cleaned_tool = {                                      â”‚
â”‚         "name": tool["name"],                               â”‚
â”‚         "description": tool["description"],                 â”‚
â”‚         "inputSchema": remove_defaults(tool["inputSchema"]) â”‚
â”‚         # mcp_service, mcp_service_factors ì œê±° â†           â”‚
â”‚       }                                                     â”‚
â”‚     â†“                                                       â”‚
â”‚     ì €ì¥ ë‚´ìš©:                                              â”‚
â”‚     {                                                       â”‚
â”‚       "name": "query_emails",                               â”‚
â”‚       "description": "...",                                 â”‚
â”‚       "inputSchema": {...}  â† default ê°’ ì œê±°              â”‚
â”‚       # mcp_service í•„ë“œ ì—†ìŒ                               â”‚
â”‚     }                                                       â”‚
â”‚     â†“                                                       â”‚
â”‚     ìš©ë„: MCP í”„ë¡œí† ì½œ, Claude/OpenAI API ì „ì†¡ìš©            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**í•µì‹¬ í¬ì¸íŠ¸:**
- ëª¨ë“  ë°ì´í„° íŒŒì‹±ì€ `tool_editor_web.py`ì˜ `save_tool_definitions()` í•¨ìˆ˜ì—ì„œ ì²˜ë¦¬
- `templates.py`ëŠ” ìˆœìˆ˜ ë°ì´í„° íŒŒì¼ (íŒŒì‹± ë¡œì§ ì—†ìŒ, JSONë§Œ ì €ì¥)
- AST íŒŒì‹±ì€ ì €ì¥ ì‹œì ì— ì‹¤ì‹œê°„ìœ¼ë¡œ ìˆ˜í–‰ (ì½”ë“œë² ì´ìŠ¤ ìŠ¤ìº”)
- ë‘ íŒŒì¼ì˜ ì°¨ì´: ë©”íƒ€ë°ì´í„° í¬í•¨ ì—¬ë¶€ë§Œ ë‹¤ë¦„

### server.py ìƒì„±

```
ì‚¬ìš©ì ì‹¤í–‰ (jinja/generate_outlook_server.py --replace)
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1ï¸âƒ£ í…œí”Œë¦¿ íŒŒì¼ ë¡œë“œ (generate_outlook_server.py:476)       â”‚
â”‚   tool_definition_outlook_templates.py                      â”‚
â”‚   â†“                                                         â”‚
â”‚   importë¡œ Python ëª¨ë“ˆ ë™ì  ë¡œë“œ                            â”‚
â”‚   â†“                                                         â”‚
â”‚   MCP_TOOLS = [                                             â”‚
â”‚     {                                                       â”‚
â”‚       "name": "query_emails",                               â”‚
â”‚       "inputSchema": {...},                                 â”‚
â”‚       "mcp_service": {                                      â”‚
â”‚         "name": "query_filter",  â† ì‹¤ì œ í•¨ìˆ˜ëª…             â”‚
â”‚         "signature": "user_email: str, filter: FilterParams..."â”‚
â”‚       }                                                     â”‚
â”‚     }                                                       â”‚
â”‚   ]                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2ï¸âƒ£ íˆ´ ë¶„ì„ ë° íŒŒë¼ë¯¸í„° íŒŒì‹± (generate_outlook_server.py)   â”‚
â”‚   analyze_tool_parameters()                                 â”‚
â”‚   â†“                                                         â”‚
â”‚   for tool in MCP_TOOLS:                                    â”‚
â”‚     # mcp_service.signature íŒŒì‹±                            â”‚
â”‚     signature = tool['mcp_service']['signature']            â”‚
â”‚     params = parse_signature(signature)                     â”‚
â”‚     â†“                                                       â”‚
â”‚     # inputSchemaì™€ ë¹„êµí•˜ì—¬ íƒ€ì… ì¶”ë¡                       â”‚
â”‚     if param_type == 'object':                              â”‚
â”‚       # Pydantic ëª¨ë¸ë¡œ ë³€í™˜ í•„ìš”                           â”‚
â”‚       object_params['filter'] = 'FilterParams'              â”‚
â”‚     â†“                                                       â”‚
â”‚     analyzed_tools[tool['name']] = {                        â”‚
â”‚       'service_method': 'query_filter',  â† í˜¸ì¶œí•  í•¨ìˆ˜      â”‚
â”‚       'params': {...},                  â† ì¼ë°˜ íŒŒë¼ë¯¸í„°     â”‚
â”‚       'object_params': {...},           â† ê°ì²´ íŒŒë¼ë¯¸í„°     â”‚
â”‚       'call_params': {...}              â† í•¨ìˆ˜ í˜¸ì¶œ ë§¤í•‘    â”‚
â”‚     }                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3ï¸âƒ£ Jinja2 í…œí”Œë¦¿ ë Œë”ë§                                     â”‚
â”‚   í…œí”Œë¦¿: ì„œë²„ë³„ í…œí”Œë¦¿ (ì˜ˆ: outlook_server_template.jinja2)â”‚
â”‚   â†“                                                         â”‚
â”‚   í…œí”Œë¦¿ ë³€ìˆ˜:                                              â”‚
â”‚   - services: ì‚¬ìš©í•  ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ ëª©ë¡                     â”‚
â”‚   - param_types: importí•  Pydantic íƒ€ì…                    â”‚
â”‚   - tools_data: ë¶„ì„ëœ íˆ´ ì •ë³´                             â”‚
â”‚   â†“                                                         â”‚
â”‚   {% for tool in tools_data %}                              â”‚
â”‚   if tool_name == "{{ tool.name }}":                        â”‚
â”‚       {% for param, info in tool.object_params.items() %}   â”‚
â”‚       {{ param }}_params = {{ info.class_name }}(**args["{{ param }}"])â”‚
â”‚       {% endfor %}                                          â”‚
â”‚       result = service.{{ tool.service_method }}(           â”‚
â”‚           {% for param in tool.call_params %}               â”‚
â”‚           {{ param }}={{ param }},                          â”‚
â”‚           {% endfor %}                                      â”‚
â”‚       )                                                     â”‚
â”‚   {% endfor %}                                              â”‚
â”‚   â†“                                                         â”‚
â”‚   ë Œë”ë§ëœ Python ì½”ë“œ (server.py):                         â”‚
â”‚   if tool_name == "query_emails":                           â”‚
â”‚       filter_params = FilterParams(**args.get("filter", {}))â”‚
â”‚       result = service.query_filter(                        â”‚
â”‚           user_email=user_email,                            â”‚
â”‚           filter=filter_params,                             â”‚
â”‚           ...                                               â”‚
â”‚       )                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4ï¸âƒ£ íŒŒì¼ ì €ì¥                                                â”‚
â”‚   ../mcp_outlook/mcp_server/server.py ìƒì„± âœ…               â”‚
â”‚   â†“                                                         â”‚
â”‚   --replace ì˜µì…˜ì´ë©´:                                       â”‚
â”‚   - ê¸°ì¡´ server.pyë¥¼ backups/ í´ë”ì— ë°±ì—…                  â”‚
â”‚   - ìƒˆ server.pyë¡œ ë®ì–´ì“°ê¸°                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**í•µì‹¬ í¬ì¸íŠ¸:**
- `templates.py`ì˜ `mcp_service.signature`ë¥¼ íŒŒì‹±í•˜ì—¬ í•¨ìˆ˜ í˜¸ì¶œ ì½”ë“œ ìƒì„±
- Jinja2 í…œí”Œë¦¿ì´ Python ì½”ë“œë¥¼ ìƒì„± (ë©”íƒ€í”„ë¡œê·¸ë˜ë°)
- `inputSchema`ì˜ `object` íƒ€ì…ì€ ìë™ìœ¼ë¡œ Pydantic ëª¨ë¸ë¡œ ë³€í™˜
- ëª¨ë“  íŒŒì‹±ê³¼ ë¶„ì„ì€ `generate_outlook_server.py`ì—ì„œ ì²˜ë¦¬
- í…œí”Œë¦¿ì€ ìˆœìˆ˜ Jinja2 ë¬¸ë²• (ë¡œì§ ì—†ìŒ)

---

## ğŸ¯ í•µì‹¬ ê°œë…

### ì „ì²´ ë°ì´í„° ì²˜ë¦¬ íë¦„ ìš”ì•½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ë°ì´í„° íŒŒì‹± ìœ„ì¹˜ ì •ë¦¬                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ 1. ì›¹ ì—ë””í„° ì €ì¥ ì‹œ (tool_editor_web.py:284)                  â”‚
â”‚    âœ“ ì›¹ì—ì„œ ë°›ì€ JSON íŒŒì‹±                                      â”‚
â”‚    âœ“ ASTë¡œ ì†ŒìŠ¤ì½”ë“œ ìŠ¤ìº” (mcp_service.signature ì¶”ì¶œ)          â”‚
â”‚    âœ“ 2ê°œ íŒŒì¼ ìƒì„± (templates.py, tool_definitions.py)         â”‚
â”‚    âœ— templates.pyëŠ” ë°ì´í„°ë§Œ ì €ì¥ (íŒŒì‹± ë¡œì§ ì—†ìŒ)             â”‚
â”‚                                                                 â”‚
â”‚ 2. server.py ìƒì„± ì‹œ (generate_outlook_server.py)              â”‚
â”‚    âœ“ templates.py ë¡œë“œ (Python import)                         â”‚
â”‚    âœ“ mcp_service.signature íŒŒì‹±                                 â”‚
â”‚    âœ“ inputSchema ë¶„ì„ ë° íƒ€ì… ì¶”ë¡                               â”‚
â”‚    âœ“ Jinja2 í…œí”Œë¦¿ ë Œë”ë§ (Python ì½”ë“œ ìƒì„±)                   â”‚
â”‚    âœ— templates.py ìˆ˜ì •í•˜ì§€ ì•ŠìŒ (ì½ê¸°ë§Œ)                       â”‚
â”‚                                                                 â”‚
â”‚ 3. ëŸ°íƒ€ì„ (server.py ì‹¤í–‰ ì‹œ)                                  â”‚
â”‚    âœ“ tool_definitions.py ë¡œë“œ                                  â”‚
â”‚    âœ“ MCP í”„ë¡œí† ì½œë¡œ Claude/OpenAIì— íˆ´ ì •ì˜ ì „ì†¡                â”‚
â”‚    âœ— íŒŒì‹± ì—†ìŒ (ì´ë¯¸ ìƒì„±ëœ ì½”ë“œ ì‹¤í–‰)                         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

**ê²°ë¡ : templates.pyëŠ” ìˆœìˆ˜ ë°ì´í„° ì €ì¥ì†Œ**
- íŒŒì‹±ì€ tool_editor_web.pyì™€ generate_*_server.pyì—ì„œë§Œ ë°œìƒ
- templates.pyëŠ” ì¤‘ê°„ ë°ì´í„° í˜•ì‹ (ë©”íƒ€ë°ì´í„° í¬í•¨)
- tool_definitions.pyëŠ” ìµœì¢… ê²°ê³¼ (API ì „ì†¡ìš©)
```

### 2ê°€ì§€ íˆ´ ì •ì˜ íŒŒì¼ì˜ ì°¨ì´

| íŒŒì¼ | ìœ„ì¹˜ | ë©”íƒ€ë°ì´í„° | ìš©ë„ |
|------|------|-----------|------|
| `tool_definition_outlook_templates.py` | `mcp_editor/` | âœ… í¬í•¨ (`mcp_service`) | ì›¹ ì—ë””í„° ë°ì´í„° ì†ŒìŠ¤, server.py ìƒì„± ì…ë ¥ |
| `tool_definitions.py` | `mcp_outlook/mcp_server/` | âŒ ì œê±°ë¨ | ì‹¤ì œ MCP ì„œë²„ì—ì„œ ì‚¬ìš©, API ì „ì†¡ìš© |

### ë©”íƒ€ë°ì´í„° í•„ë“œ

```python
"mcp_service": {
    "name": "query_search",  # ì‹¤ì œ í•¨ìˆ˜ëª… (ì„œë²„ ìƒì„± ì‹œ ì‚¬ìš©)
    "signature": "user_email: str, search: str, ..."  # íŒŒë¼ë¯¸í„° íƒ€ì…
}
```

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ê¸°ì¡´ ì„œë²„ í¸ì§‘

```bash
# 1. ì›¹ ì—ë””í„° ì‹¤í–‰
./run_tool_editor.sh

# 2. ë¸Œë¼ìš°ì €ì—ì„œ íˆ´ í¸ì§‘
# http://localhost:8091

# 3. server.py ì¬ìƒì„± (í•„ìš” ì‹œ)
cd ../jinja
python generate_outlook_server.py --replace
```

### ìƒˆ MCP ì„œë²„ ìƒì„±

#### ë°©ë²• 1: CLI ì‚¬ìš©

```bash
cd ../jinja
python scaffold_generator.py my_server \
  --description "My custom MCP server" \
  --port 8086

# ìƒì„± í›„:
cd ../mcp_my_server/mcp_server
python -m venv venv
source venv/bin/activate
pip install fastapi uvicorn pydantic

# ì›¹ ì—ë””í„°ì—ì„œ íˆ´ í¸ì§‘
cd ../../mcp_editor
./run_tool_editor.sh
# ë¸Œë¼ìš°ì €ì—ì„œ "my_server" í”„ë¡œí•„ ì„ íƒ
```

#### ë°©ë²• 2: ì›¹ ì—ë””í„° UI ì‚¬ìš©

```bash
# 1. ì›¹ ì—ë””í„° ì‹¤í–‰
./run_tool_editor.sh

# 2. ë¸Œë¼ìš°ì €ì—ì„œ "Create New Server" ë²„íŠ¼ í´ë¦­
#    - ì„œë²„ ì´ë¦„ ì…ë ¥ (ì˜ˆ: calendar)
#    - ì„¤ëª… ì…ë ¥
#    - í¬íŠ¸ ë²ˆí˜¸ ì„¤ì •
#    - Create ë²„íŠ¼ í´ë¦­

# 3. ìƒì„± ì™„ë£Œ í›„ ìë™ìœ¼ë¡œ í”„ë¡œí•„ ì¶”ê°€ë¨
#    - editor_config.jsonì— ìƒˆ í”„ë¡œí•„ ì¶”ê°€
#    - mcp_calendar/ í´ë” êµ¬ì¡° ìƒì„±
#    - tool_definition_calendar_templates.py ìƒì„±
```

---

## ğŸ“ ì°¸ê³ ì‚¬í•­

- `tool_definition_outlook_templates.py`ëŠ” **ìë™ ìƒì„± íŒŒì¼**ì´ì§€ë§Œ **í¸ì§‘ ê°€ëŠ¥**í•©ë‹ˆë‹¤
- ì›¹ ì—ë””í„°ë¡œ ì €ì¥í•˜ë©´ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤
- `mcp_service` ë©”íƒ€ë°ì´í„°ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì¶”ê°€í•˜ë©´ server.py ìƒì„± ì‹œ ë°˜ì˜ë©ë‹ˆë‹¤
- `editor_config.json`ìœ¼ë¡œ ì—¬ëŸ¬ MCP ì„œë²„ë¥¼ ë™ì‹œì— ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ìƒˆ ì„œë²„ ìƒì„± ì‹œ ìë™ìœ¼ë¡œ í•„ìš”í•œ ëª¨ë“  íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤:
  - `mcp_{server_name}/mcp_server/` ë””ë ‰í† ë¦¬ êµ¬ì¡°
  - `server.py`, `tool_definitions.py`, `run.py`
  - `tool_definition_{server_name}_templates.py`
  - Jinja2 í…œí”Œë¦¿ íŒŒì¼
  - `editor_config.json`ì— í”„ë¡œí•„ ì¶”ê°€
